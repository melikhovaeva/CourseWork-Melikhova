{% extends '_base.html' %}


{% block content %}

    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Студент</th>
            <th scope="col">Позиции</th>
            <th scope="col">Фин. цена</th>
            <th scope="col">Дата</th>
        </tr>
        </thead>
        <tbody>
        {% for basket_item in basket %}
            <tr>
                <th scope="row">{{ basket_item.id }}</th>
                <td>{{ basket_item.student }}</td>
                <td>
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">Продукт</th>
                            <th>Кол-во</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for entry in basket_item.entries.all %}
                            <tr>
                            <td>{{ entry.product.name }}</td>
                            <td>{{ entry.quantity }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </td>
                <td>{{ basket_item.total_price }}</td>
                <td>{{ basket_item.add_datetime }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock content %}
